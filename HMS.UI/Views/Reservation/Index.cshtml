@model IEnumerable<HMS.Domain.Entities.ViewModels.ReservationHallVM>
@{
    Layout = "custom";
}
@*
//////////////////////////////////////////////////
//Author : Mohammed Gaffer Aidaab
//For : King Faisual University
//Under : ISB integrated sulution business Company
//Halls ManageMent System
/////////////////////////////////////////////////////
*@
@{
}


<div class="mg-div" style="background-image:url('/assets/media/images/clock.png')">
    <div class="card card-custom mg-card">
        <div class="card-header" style="align-content:center">
            <div class="card-title">
                الحجوزات
            </div>
            <div>
                <a href="/reservation/canceledreservations"><input type="button" class="btn btn-danger" value="الحجوزات الملغية" /></a>
            </div>
        </div>
        <div class="card-body">
            <table id="data" class="table table-bordered">
                <thead>
                    <tr style="text-align:center !important">
                        <th>اسم الحجز</th>
                        <th>وقت البداية</th>
                        <th>وقت الانتهاء</th>
                        <th>التاريخ</th>
                        <th>اسم القاعة</th>
                        <th>اسم المستخدم</th>
                        <th>
                            @if (User.IsInRole("super-admin"))
                            {
                                <p>
                                    تعديل
                                </p>
                            }
                        </th>
                    </tr>
                </thead>
                <tbody></tbody>
            </table>
        </div>
        <div class="card-fotter">
        </div>


    </div>
</div>


@section Scripts {

    @if (TempData["message"] != null)
    {
        <script>messagebox.swall('@TempData["message"]', '@TempData["type"]')</script>
    }

	@{
		await Html.RenderPartialAsync("_ValidationScriptsPartial");
	}


    <script>
        GetDataTableData();
        function GetDataTableData() {
            $("#data").DataTable({
                "processing": true,
                "serverSide": true,
                "filter": true,
                "orderMulti": false,
                "destroy": true,
                "ordering": true,
                "ajax": {
                    "url": '/Reservation/GetDetails',
                    "type": "POST",
                    "datatype": "json"
                },

                "columns": [
                    { "data": "name", "name": "Name", "autoWidth": true },
                    { "data": "time_Start", "name": "time_Start", "autoWidth": true },
                    { "data": "time_End", "name": "time_End", "autoWidth": true },
                    { "data": "date", "name": "date", "autoWidth": true },
                    { "data": "hall_name", "name": "hall_name", "autoWidth": true },
                    { "data": "user_Name", "name": "user_Name", "autoWidth": true },
                    {
                        "mData": null,
                        "bSortable": false,
                        "mRender": function (data) { return '@if (User.IsInRole("super_admin"))  {  <a href="edit/' + data.id + '"><button class="btn btn-warning"> تعديل الحجز  <i class="fa-solid fa-edit fa-2xl"></i> </button> </a> }'; }
                    },
                ]
            });
        }
    </script>

}